import{f as ee,w as ga,_ as $,q as ir,m as Ma,d as j,s as Ca,x as ka,k as Pa,a as Vr,y as na,p as ua,z as oa,B as Sa}from"./AntdIcon-CaIQg0UY.js";import{u as Da,P as ya}from"./motion-USQerLMX.js";import{R as wa}from"./index-CHvFsMmm.js";import{r as o}from"./index-DH5ua8nC.js";import{_ as ba}from"./assertThisInitialized-BIGTeGEP.js";import{i as Na}from"./useSize-D_CeqxI_.js";const Ta=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};function za(r){var t=r.prefixCls,e=r.align,n=r.arrow,i=r.arrowPos,s=n||{},v=s.className,h=s.content,y=i.x,d=y===void 0?0:y,S=i.y,c=S===void 0?0:S,B=o.useRef();if(!e||!e.points)return null;var f={position:"absolute"};if(e.autoArrow!==!1){var L=e.points[0],F=e.points[1],x=L[0],E=L[1],H=F[0],k=F[1];x===H||!["t","b"].includes(x)?f.top=c:x==="t"?f.top=0:f.bottom=0,E===k||!["l","r"].includes(E)?f.left=d:E==="l"?f.left=0:f.right=0}return o.createElement("div",{ref:B,className:ee("".concat(t,"-arrow"),v),style:f},h)}function La(r){var t=r.prefixCls,e=r.open,n=r.zIndex,i=r.mask,s=r.motion;return i?o.createElement(ga,ba({},s,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(v){var h=v.className;return o.createElement("div",{style:{zIndex:n},className:ee("".concat(t,"-mask"),h)})}):null}var xa=o.memo(function(r){var t=r.children;return t},function(r,t){return t.cache}),Wa=o.forwardRef(function(r,t){var e=r.popup,n=r.className,i=r.prefixCls,s=r.style,v=r.target,h=r.onVisibleChanged,y=r.open,d=r.keepDom,S=r.fresh,c=r.onClick,B=r.mask,f=r.arrow,L=r.arrowPos,F=r.align,x=r.motion,E=r.maskMotion,H=r.forceRender,k=r.getPopupContainer,u=r.autoDestroy,G=r.portal,yr=r.zIndex,lr=r.onMouseEnter,wr=r.onMouseLeave,zr=r.onPointerEnter,br=r.ready,Lr=r.offsetX,ur=r.offsetY,sr=r.offsetR,p=r.offsetB,vr=r.onAlign,D=r.onPrepare,T=r.stretch,g=r.targetWidth,K=r.targetHeight,b=typeof e=="function"?e():e,rr=y||d,X=(k==null?void 0:k.length)>0,ae=o.useState(!k||!X),Ur=$(ae,2),cr=Ur[0],Jr=Ur[1];if(ir(function(){!cr&&X&&v&&Jr(!0)},[cr,X,v]),!cr)return null;var Y="auto",z={left:"-1000vw",top:"-1000vh",right:Y,bottom:Y};if(br||!y){var Q,er=F.points,ar=F.dynamicInset||((Q=F._experimental)===null||Q===void 0?void 0:Q.dynamicInset),Gr=ar&&er[0][1]==="r",te=ar&&er[0][0]==="b";Gr?(z.right=sr,z.left=Y):(z.left=Lr,z.right=Y),te?(z.bottom=p,z.top=Y):(z.top=ur,z.bottom=Y)}var R={};return T&&(T.includes("height")&&K?R.height=K:T.includes("minHeight")&&K&&(R.minHeight=K),T.includes("width")&&g?R.width=g:T.includes("minWidth")&&g&&(R.minWidth=g)),y||(R.pointerEvents="none"),o.createElement(G,{open:H||rr,getContainer:k&&function(){return k(v)},autoDestroy:u},o.createElement(La,{prefixCls:i,open:y,zIndex:yr,mask:B,motion:E}),o.createElement(wa,{onResize:vr,disabled:!y},function(Kr){return o.createElement(ga,ba({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:H,leavedClassName:"".concat(i,"-hidden")},x,{onAppearPrepare:D,onEnterPrepare:D,visible:y,onVisibleChanged:function(V){var fr;x==null||(fr=x.onVisibleChanged)===null||fr===void 0||fr.call(x,V),h(V)}}),function(Mr,V){var fr=Mr.className,w=Mr.style,xr=ee(i,fr,n);return o.createElement("div",{ref:Ma(Kr,t,V),className:xr,style:j(j(j(j({"--arrow-x":"".concat(L.x||0,"px"),"--arrow-y":"".concat(L.y||0,"px")},z),R),w),{},{boxSizing:"border-box",zIndex:yr},s),onMouseEnter:lr,onMouseLeave:wr,onPointerEnter:zr,onClick:c},f&&o.createElement(za,{prefixCls:i,arrow:f,arrowPos:L,align:F}),o.createElement(xa,{cache:!y&&!S},b))})}))}),$a=o.forwardRef(function(r,t){var e=r.children,n=r.getTriggerDOMNode,i=Ca(e),s=o.useCallback(function(h){ka(t,n?n(h):h)},[n]),v=Pa(s,e.ref);return i?o.cloneElement(e,{ref:v}):e}),sa=o.createContext(null);function va(r){return r?Array.isArray(r)?r:[r]:[]}function Ba(r,t,e,n){return o.useMemo(function(){var i=va(e??t),s=va(n??t),v=new Set(i),h=new Set(s);return r&&(v.has("hover")&&(v.delete("hover"),v.add("click")),h.has("hover")&&(h.delete("hover"),h.add("click"))),[v,h]},[r,t,e,n])}function Ha(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?r[0]===t[0]:r[0]===t[0]&&r[1]===t[1]}function Ra(r,t,e,n){for(var i=e.points,s=Object.keys(r),v=0;v<s.length;v+=1){var h,y=s[v];if(Ha((h=r[y])===null||h===void 0?void 0:h.points,i,n))return"".concat(t,"-placement-").concat(y)}return""}function ca(r,t,e,n){return t||(e?{motionName:"".concat(r,"-").concat(e)}:n?{motionName:n}:null)}function he(r){return r.ownerDocument.defaultView}function ia(r){for(var t=[],e=r==null?void 0:r.parentElement,n=["hidden","scroll","clip","auto"];e;){var i=he(e).getComputedStyle(e),s=i.overflowX,v=i.overflowY,h=i.overflow;[s,v,h].some(function(y){return n.includes(y)})&&t.push(e),e=e.parentElement}return t}function me(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(r)?t:r}function de(r){return me(parseFloat(r),0)}function fa(r,t){var e=j({},r);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var i=he(n).getComputedStyle(n),s=i.overflow,v=i.overflowClipMargin,h=i.borderTopWidth,y=i.borderBottomWidth,d=i.borderLeftWidth,S=i.borderRightWidth,c=n.getBoundingClientRect(),B=n.offsetHeight,f=n.clientHeight,L=n.offsetWidth,F=n.clientWidth,x=de(h),E=de(y),H=de(d),k=de(S),u=me(Math.round(c.width/L*1e3)/1e3),G=me(Math.round(c.height/B*1e3)/1e3),yr=(L-F-H-k)*u,lr=(B-f-x-E)*G,wr=x*G,zr=E*G,br=H*u,Lr=k*u,ur=0,sr=0;if(s==="clip"){var p=de(v);ur=p*u,sr=p*G}var vr=c.x+br-ur,D=c.y+wr-sr,T=vr+c.width+2*ur-br-Lr-yr,g=D+c.height+2*sr-wr-zr-lr;e.left=Math.max(e.left,vr),e.top=Math.max(e.top,D),e.right=Math.min(e.right,T),e.bottom=Math.min(e.bottom,g)}}),e}function da(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(t),n=e.match(/^(.*)\%$/);return n?r*(parseFloat(n[1])/100):parseFloat(e)}function ma(r,t){var e=t||[],n=$(e,2),i=n[0],s=n[1];return[da(r.width,i),da(r.height,s)]}function ha(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[r[0],r[1]]}function re(r,t){var e=t[0],n=t[1],i,s;return e==="t"?s=r.y:e==="b"?s=r.y+r.height:s=r.y+r.height/2,n==="l"?i=r.x:n==="r"?i=r.x+r.width:i=r.x+r.width/2,{x:i,y:s}}function Tr(r,t){var e={t:"b",b:"t",l:"r",r:"l"};return r.map(function(n,i){return i===t?e[n]||"c":n}).join("")}function Fa(r,t,e,n,i,s,v){var h=o.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[n]||{}}),y=$(h,2),d=y[0],S=y[1],c=o.useRef(0),B=o.useMemo(function(){return t?ia(t):[]},[t]),f=o.useRef({}),L=function(){f.current={}};r||L();var F=Vr(function(){if(t&&e&&r){let I=function(gr,Ar){var Or=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xr,pr=b.x+gr,ce=b.y+Ar,fe=pr+Q,Re=ce+z,pe=Math.max(pr,Or.left),ra=Math.max(ce,Or.top),ea=Math.min(fe,Or.right),aa=Math.min(Re,Or.bottom);return Math.max(0,(ea-pe)*(aa-ra))},He=function(){Pr=b.y+m,Sr=Pr+z,Dr=b.x+P,_r=Dr+Q};var H,k,u=t,G=u.ownerDocument,yr=he(u),lr=yr.getComputedStyle(u),wr=lr.width,zr=lr.height,br=lr.position,Lr=u.style.left,ur=u.style.top,sr=u.style.right,p=u.style.bottom,vr=u.style.overflow,D=j(j({},i[n]),s),T=G.createElement("div");(H=u.parentElement)===null||H===void 0||H.appendChild(T),T.style.left="".concat(u.offsetLeft,"px"),T.style.top="".concat(u.offsetTop,"px"),T.style.position=br,T.style.height="".concat(u.offsetHeight,"px"),T.style.width="".concat(u.offsetWidth,"px"),u.style.left="0",u.style.top="0",u.style.right="auto",u.style.bottom="auto",u.style.overflow="hidden";var g;if(Array.isArray(e))g={x:e[0],y:e[1],width:0,height:0};else{var K=e.getBoundingClientRect();g={x:K.x,y:K.y,width:K.width,height:K.height}}var b=u.getBoundingClientRect(),rr=G.documentElement,X=rr.clientWidth,ae=rr.clientHeight,Ur=rr.scrollWidth,cr=rr.scrollHeight,Jr=rr.scrollTop,Y=rr.scrollLeft,z=b.height,Q=b.width,er=g.height,ar=g.width,Gr={left:0,top:0,right:X,bottom:ae},te={left:-Y,top:-Jr,right:Ur-Y,bottom:cr-Jr},R=D.htmlRegion,Kr="visible",Mr="visibleFirst";R!=="scroll"&&R!==Mr&&(R=Kr);var V=R===Mr,fr=fa(te,B),w=fa(Gr,B),xr=R===Kr?w:fr,Z=V?w:xr;u.style.left="auto",u.style.top="auto",u.style.right="0",u.style.bottom="0";var ge=u.getBoundingClientRect();u.style.left=Lr,u.style.top=ur,u.style.right=sr,u.style.bottom=p,u.style.overflow=vr,(k=u.parentElement)===null||k===void 0||k.removeChild(T);var Wr=me(Math.round(Q/parseFloat(wr)*1e3)/1e3),$r=me(Math.round(z/parseFloat(zr)*1e3)/1e3);if(Wr===0||$r===0||na(e)&&!Na(e))return;var ye=D.offset,q=D.targetOffset,je=ma(b,ye),we=$(je,2),O=we[0],_=we[1],tr=ma(g,q),be=$(tr,2),Me=be[0],qe=be[1];g.x-=Me,g.y-=qe;var Qr=D.points||[],U=$(Qr,2),Cr=U[0],Ae=U[1],dr=ha(Ae),J=ha(Cr),Ce=re(g,dr),ne=re(b,J),kr=j({},D),P=Ce.x-ne.x+O,m=Ce.y-ne.y+_,nr=I(P,m),or=I(P,m,w),Br=re(g,["t","l"]),oe=re(b,["t","l"]),ie=re(g,["b","r"]),le=re(b,["b","r"]),A=D.overflow||{},Ve=A.adjustX,ke=A.adjustY,Zr=A.shiftX,ue=A.shiftY,Pe=function(Ar){return typeof Ar=="boolean"?Ar:Ar>=0},Pr,Sr,Dr,_r;He();var se=Pe(ke),ve=J[0]===dr[0];if(se&&J[0]==="t"&&(Sr>Z.bottom||f.current.bt)){var Hr=m;ve?Hr-=z-er:Hr=Br.y-le.y-_;var Rr=I(P,Hr),Ue=I(P,Hr,w);Rr>nr||Rr===nr&&(!V||Ue>=or)?(f.current.bt=!0,m=Hr,_=-_,kr.points=[Tr(J,0),Tr(dr,0)]):f.current.bt=!1}if(se&&J[0]==="b"&&(Pr<Z.top||f.current.tb)){var W=m;ve?W+=z-er:W=ie.y-oe.y-_;var Se=I(P,W),Je=I(P,W,w);Se>nr||Se===nr&&(!V||Je>=or)?(f.current.tb=!0,m=W,_=-_,kr.points=[Tr(J,0),Tr(dr,0)]):f.current.tb=!1}var De=Pe(Ve),Ne=J[1]===dr[1];if(De&&J[1]==="l"&&(_r>Z.right||f.current.rl)){var Fr=P;Ne?Fr-=Q-ar:Fr=Br.x-le.x-O;var Te=I(Fr,m),Ge=I(Fr,m,w);Te>nr||Te===nr&&(!V||Ge>=or)?(f.current.rl=!0,P=Fr,O=-O,kr.points=[Tr(J,1),Tr(dr,1)]):f.current.rl=!1}if(De&&J[1]==="r"&&(Dr<Z.left||f.current.lr)){var Er=P;Ne?Er+=Q-ar:Er=ie.x-oe.x-O;var ze=I(Er,m),Ir=I(Er,m,w);ze>nr||ze===nr&&(!V||Ir>=or)?(f.current.lr=!0,P=Er,O=-O,kr.points=[Tr(J,1),Tr(dr,1)]):f.current.lr=!1}He();var mr=Zr===!0?0:Zr;typeof mr=="number"&&(Dr<w.left&&(P-=Dr-w.left-O,g.x+ar<w.left+mr&&(P+=g.x-w.left+ar-mr)),_r>w.right&&(P-=_r-w.right-O,g.x>w.right-mr&&(P+=g.x-w.right+mr)));var jr=ue===!0?0:ue;typeof jr=="number"&&(Pr<w.top&&(m-=Pr-w.top-_,g.y+er<w.top+jr&&(m+=g.y-w.top+er-jr)),Sr>w.bottom&&(m-=Sr-w.bottom-_,g.y>w.bottom-jr&&(m+=g.y-w.bottom+jr)));var Xr=b.x+P,Yr=Xr+Q,hr=b.y+m,Le=hr+z,qr=g.x,Nr=qr+ar,xe=g.y,Ke=xe+er,Qe=Math.max(Xr,qr),We=Math.min(Yr,Nr),Ze=(Qe+We)/2,_e=Ze-Xr,Ie=Math.max(hr,xe),$e=Math.min(Le,Ke),Xe=(Ie+$e)/2,Ye=Xe-hr;v==null||v(t,kr);var Be=ge.right-b.x-(P+b.width),Oe=ge.bottom-b.y-(m+b.height);S({ready:!0,offsetX:P/Wr,offsetY:m/$r,offsetR:Be/Wr,offsetB:Oe/$r,arrowX:_e/Wr,arrowY:Ye/$r,scaleX:Wr,scaleY:$r,align:kr})}}),x=function(){c.current+=1;var k=c.current;Promise.resolve().then(function(){c.current===k&&F()})},E=function(){S(function(k){return j(j({},k),{},{ready:!1})})};return ir(E,[n]),ir(function(){r||E()},[r]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,x]}function Ea(r,t,e,n,i){ir(function(){if(r&&t&&e){let c=function(){n(),i()};var s=t,v=e,h=ia(s),y=ia(v),d=he(v),S=new Set([d].concat(ua(h),ua(y)));return S.forEach(function(B){B.addEventListener("scroll",c,{passive:!0})}),d.addEventListener("resize",c,{passive:!0}),n(),function(){S.forEach(function(B){B.removeEventListener("scroll",c),d.removeEventListener("resize",c)})}}},[r,t,e])}function ja(r,t,e,n,i,s,v,h){var y=o.useRef(r);y.current=r,o.useEffect(function(){if(t&&n&&(!i||s)){var d=function(f){var L=f.target;y.current&&!v(L)&&h(!1)},S=he(n);S.addEventListener("mousedown",d,!0),S.addEventListener("contextmenu",d,!0);var c=oa(e);return c&&(c.addEventListener("mousedown",d,!0),c.addEventListener("contextmenu",d,!0)),function(){S.removeEventListener("mousedown",d,!0),S.removeEventListener("contextmenu",d,!0),c&&(c.removeEventListener("mousedown",d,!0),c.removeEventListener("contextmenu",d,!0))}}},[t,e,n,i,s])}var qa=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Aa(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ya,t=o.forwardRef(function(e,n){var i=e.prefixCls,s=i===void 0?"rc-trigger-popup":i,v=e.children,h=e.action,y=h===void 0?"hover":h,d=e.showAction,S=e.hideAction,c=e.popupVisible,B=e.defaultPopupVisible,f=e.onPopupVisibleChange,L=e.afterPopupVisibleChange,F=e.mouseEnterDelay,x=e.mouseLeaveDelay,E=x===void 0?.1:x,H=e.focusDelay,k=e.blurDelay,u=e.mask,G=e.maskClosable,yr=G===void 0?!0:G,lr=e.getPopupContainer,wr=e.forceRender,zr=e.autoDestroy,br=e.destroyPopupOnHide,Lr=e.popup,ur=e.popupClassName,sr=e.popupStyle,p=e.popupPlacement,vr=e.builtinPlacements,D=vr===void 0?{}:vr,T=e.popupAlign,g=e.zIndex,K=e.stretch,b=e.getPopupClassNameFromAlign,rr=e.fresh,X=e.alignPoint,ae=e.onPopupClick,Ur=e.onPopupAlign,cr=e.arrow,Jr=e.popupMotion,Y=e.maskMotion,z=e.popupTransitionName,Q=e.popupAnimation,er=e.maskTransitionName,ar=e.maskAnimation,Gr=e.className,te=e.getTriggerDOMNode,R=Sa(e,qa),Kr=zr||br||!1,Mr=o.useState(!1),V=$(Mr,2),fr=V[0],w=V[1];ir(function(){w(Ta())},[]);var xr=o.useRef({}),Z=o.useContext(sa),ge=o.useMemo(function(){return{registerSubPopup:function(l,M){xr.current[l]=M,Z==null||Z.registerSubPopup(l,M)}}},[Z]),Wr=Da(),$r=o.useState(null),ye=$($r,2),q=ye[0],je=ye[1],we=Vr(function(a){na(a)&&q!==a&&je(a),Z==null||Z.registerSubPopup(Wr,a)}),O=o.useState(null),_=$(O,2),tr=_[0],be=_[1],Me=o.useRef(null),qe=Vr(function(a){na(a)&&tr!==a&&(be(a),Me.current=a)}),Qr=o.Children.only(v),U=(Qr==null?void 0:Qr.props)||{},Cr={},Ae=Vr(function(a){var l,M,N=tr;return(N==null?void 0:N.contains(a))||((l=oa(N))===null||l===void 0?void 0:l.host)===a||a===N||(q==null?void 0:q.contains(a))||((M=oa(q))===null||M===void 0?void 0:M.host)===a||a===q||Object.values(xr.current).some(function(C){return(C==null?void 0:C.contains(a))||a===C})}),dr=ca(s,Jr,Q,z),J=ca(s,Y,ar,er),Ce=o.useState(B||!1),ne=$(Ce,2),kr=ne[0],P=ne[1],m=c??kr,nr=Vr(function(a){c===void 0&&P(a)});ir(function(){P(c||!1)},[c]);var or=o.useRef(m);or.current=m;var Br=o.useRef([]);Br.current=[];var oe=Vr(function(a){var l;nr(a),((l=Br.current[Br.current.length-1])!==null&&l!==void 0?l:m)!==a&&(Br.current.push(a),f==null||f(a))}),ie=o.useRef(),le=function(){clearTimeout(ie.current)},A=function(l){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;le(),M===0?oe(l):ie.current=setTimeout(function(){oe(l)},M*1e3)};o.useEffect(function(){return le},[]);var Ve=o.useState(!1),ke=$(Ve,2),Zr=ke[0],ue=ke[1];ir(function(a){(!a||m)&&ue(!0)},[m]);var Pe=o.useState(null),Pr=$(Pe,2),Sr=Pr[0],Dr=Pr[1],_r=o.useState([0,0]),se=$(_r,2),ve=se[0],Hr=se[1],Rr=function(l){Hr([l.clientX,l.clientY])},Ue=Fa(m,q,X?ve:tr,p,D,T,Ur),W=$(Ue,11),Se=W[0],Je=W[1],De=W[2],Ne=W[3],Fr=W[4],Te=W[5],Ge=W[6],Er=W[7],ze=W[8],Ir=W[9],mr=W[10],jr=Ba(fr,y,d,S),Xr=$(jr,2),Yr=Xr[0],hr=Xr[1],Le=Yr.has("click"),qr=hr.has("click")||hr.has("contextMenu"),Nr=Vr(function(){Zr||mr()}),xe=function(){or.current&&X&&qr&&A(!1)};Ea(m,tr,q,Nr,xe),ir(function(){Nr()},[ve,p]),ir(function(){m&&!(D!=null&&D[p])&&Nr()},[JSON.stringify(T)]);var Ke=o.useMemo(function(){var a=Ra(D,s,Ir,X);return ee(a,b==null?void 0:b(Ir))},[Ir,b,D,s,X]);o.useImperativeHandle(n,function(){return{nativeElement:Me.current,forceAlign:Nr}});var Qe=o.useState(0),We=$(Qe,2),Ze=We[0],_e=We[1],Ie=o.useState(0),$e=$(Ie,2),Xe=$e[0],Ye=$e[1],Be=function(){if(K&&tr){var l=tr.getBoundingClientRect();_e(l.width),Ye(l.height)}},Oe=function(){Be(),Nr()},I=function(l){ue(!1),mr(),L==null||L(l)},He=function(){return new Promise(function(l){Be(),Dr(function(){return l})})};ir(function(){Sr&&(mr(),Sr(),Dr(null))},[Sr]);function gr(a,l,M,N){Cr[a]=function(C){var Fe;N==null||N(C),A(l,M);for(var ta=arguments.length,la=new Array(ta>1?ta-1:0),Ee=1;Ee<ta;Ee++)la[Ee-1]=arguments[Ee];(Fe=U[a])===null||Fe===void 0||Fe.call.apply(Fe,[U,C].concat(la))}}(Le||qr)&&(Cr.onClick=function(a){var l;or.current&&qr?A(!1):!or.current&&Le&&(Rr(a),A(!0));for(var M=arguments.length,N=new Array(M>1?M-1:0),C=1;C<M;C++)N[C-1]=arguments[C];(l=U.onClick)===null||l===void 0||l.call.apply(l,[U,a].concat(N))}),ja(m,qr,tr,q,u,yr,Ae,A);var Ar=Yr.has("hover"),Or=hr.has("hover"),pr,ce;Ar&&(gr("onMouseEnter",!0,F,function(a){Rr(a)}),gr("onPointerEnter",!0,F,function(a){Rr(a)}),pr=function(l){(m||Zr)&&q!==null&&q!==void 0&&q.contains(l.target)&&A(!0,F)},X&&(Cr.onMouseMove=function(a){var l;(l=U.onMouseMove)===null||l===void 0||l.call(U,a)})),Or&&(gr("onMouseLeave",!1,E),gr("onPointerLeave",!1,E),ce=function(){A(!1,E)}),Yr.has("focus")&&gr("onFocus",!0,H),hr.has("focus")&&gr("onBlur",!1,k),Yr.has("contextMenu")&&(Cr.onContextMenu=function(a){var l;or.current&&hr.has("contextMenu")?A(!1):(Rr(a),A(!0)),a.preventDefault();for(var M=arguments.length,N=new Array(M>1?M-1:0),C=1;C<M;C++)N[C-1]=arguments[C];(l=U.onContextMenu)===null||l===void 0||l.call.apply(l,[U,a].concat(N))}),Gr&&(Cr.className=ee(U.className,Gr));var fe=j(j({},U),Cr),Re={},pe=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];pe.forEach(function(a){R[a]&&(Re[a]=function(){for(var l,M=arguments.length,N=new Array(M),C=0;C<M;C++)N[C]=arguments[C];(l=fe[a])===null||l===void 0||l.call.apply(l,[fe].concat(N)),R[a].apply(R,N)})});var ra=o.cloneElement(Qr,j(j({},fe),Re)),ea={x:Te,y:Ge},aa=cr?j({},cr!==!0?cr:{}):null;return o.createElement(o.Fragment,null,o.createElement(wa,{disabled:!m,ref:qe,onResize:Oe},o.createElement($a,{getTriggerDOMNode:te},ra)),o.createElement(sa.Provider,{value:ge},o.createElement(Wa,{portal:r,ref:we,prefixCls:s,popup:Lr,className:ee(ur,Ke),style:sr,target:tr,onMouseEnter:pr,onMouseLeave:ce,onPointerEnter:pr,zIndex:g,open:m,keepDom:Zr,fresh:rr,onClick:ae,mask:u,motion:dr,maskMotion:J,onVisibleChanged:I,onPrepare:He,forceRender:wr,autoDestroy:Kr,getPopupContainer:lr,align:Ir,arrow:aa,arrowPos:ea,ready:Se,offsetX:Je,offsetY:De,offsetR:Ne,offsetB:Fr,onAlign:Nr,stretch:K,targetWidth:Ze/Er,targetHeight:Xe/ze})))});return t}const Za=Aa(ya);export{Za as T,Ta as i};
